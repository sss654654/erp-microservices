{
  "info": {
    "name": "ERP Microservices API",
    "description": "ERP 마이크로서비스 API 테스트 컬렉션",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Employee Service",
      "item": [
        {
          "name": "1. 직원 생성 (요청자)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8081/employees",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"김철수\",\n  \"department\": \"개발팀\",\n  \"position\": \"사원\"\n}"
            }
          }
        },
        {
          "name": "2. 직원 생성 (결재자1)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8081/employees",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"이영희\",\n  \"department\": \"개발팀\",\n  \"position\": \"팀장\"\n}"
            }
          }
        },
        {
          "name": "3. 직원 생성 (결재자2)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8081/employees",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"박민수\",\n  \"department\": \"경영지원팀\",\n  \"position\": \"부장\"\n}"
            }
          }
        },
        {
          "name": "4. 전체 직원 조회",
          "request": {
            "method": "GET",
            "url": "http://localhost:8081/employees"
          }
        },
        {
          "name": "5. 부서별 필터링 조회",
          "request": {
            "method": "GET",
            "url": "http://localhost:8081/employees?department=개발팀"
          }
        },
        {
          "name": "6. 직원 상세 조회",
          "request": {
            "method": "GET",
            "url": "http://localhost:8081/employees/1"
          }
        },
        {
          "name": "7. 직원 수정",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8081/employees/1",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"department\": \"개발팀\",\n  \"position\": \"대리\"\n}"
            }
          }
        },
        {
          "name": "8. 직원 삭제",
          "request": {
            "method": "DELETE",
            "url": "http://localhost:8081/employees/1"
          }
        }
      ]
    },
    {
      "name": "Approval Request Service",
      "item": [
        {
          "name": "1. 결재 요청 생성 (2단계)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8082/approvals",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"requesterId\": 1,\n  \"title\": \"휴가 신청\",\n  \"content\": \"2025-12-01 연차 사용 신청합니다\",\n  \"steps\": [\n    {\"step\": 1, \"approverId\": 2},\n    {\"step\": 2, \"approverId\": 3}\n  ]\n}"
            }
          }
        },
        {
          "name": "2. 결재 요청 생성 (1단계)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8082/approvals",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"requesterId\": 1,\n  \"title\": \"출장 신청\",\n  \"content\": \"서울 본사 출장 신청\",\n  \"steps\": [\n    {\"step\": 1, \"approverId\": 2}\n  ]\n}"
            }
          }
        },
        {
          "name": "3. 전체 결재 조회",
          "request": {
            "method": "GET",
            "url": "http://localhost:8082/approvals"
          }
        },
        {
          "name": "4. 결재 상세 조회",
          "request": {
            "method": "GET",
            "url": "http://localhost:8082/approvals/1"
          }
        }
      ]
    },
    {
      "name": "Approval Processing Service",
      "item": [
        {
          "name": "1. 결재자 대기 목록 조회 (결재자1)",
          "request": {
            "method": "GET",
            "url": "http://localhost:8083/process/2"
          }
        },
        {
          "name": "2. 결재자 대기 목록 조회 (결재자2)",
          "request": {
            "method": "GET",
            "url": "http://localhost:8083/process/3"
          }
        },
        {
          "name": "3. 결재 승인 (결재자1)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8083/process/2/1",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\"\n}"
            }
          }
        },
        {
          "name": "4. 결재 승인 (결재자2)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8083/process/3/1",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\"\n}"
            }
          }
        },
        {
          "name": "5. 결재 반려",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8083/process/2/2",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"rejected\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Notification Service",
      "item": [
        {
          "name": "1. Health Check",
          "request": {
            "method": "GET",
            "url": "http://localhost:8084/notifications/health"
          }
        },
        {
          "name": "2. 알림 발송 (테스트)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "url": "http://localhost:8084/notifications/send",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"approvalId\": \"test123\",\n  \"status\": \"APPROVED\",\n  \"message\": \"결재가 승인되었습니다\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "통합 테스트 시나리오",
      "item": [
        {
          "name": "시나리오 1: 2단계 결재 승인 완료",
          "item": [
            {
              "name": "1-1. 직원 3명 생성",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8081/employees",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"김철수\",\n  \"department\": \"개발팀\",\n  \"position\": \"사원\"\n}"
                }
              }
            },
            {
              "name": "1-2. 2단계 결재 요청",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8082/approvals",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"requesterId\": 1,\n  \"title\": \"휴가 신청\",\n  \"content\": \"2025-12-01 연차 사용 신청합니다\",\n  \"steps\": [\n    {\"step\": 1, \"approverId\": 2},\n    {\"step\": 2, \"approverId\": 3}\n  ]\n}"
                }
              }
            },
            {
              "name": "1-3. 결재자1 대기 목록 확인",
              "request": {
                "method": "GET",
                "url": "http://localhost:8083/process/2"
              }
            },
            {
              "name": "1-4. 결재자1 승인",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8083/process/2/1",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"approved\"\n}"
                }
              }
            },
            {
              "name": "1-5. 결재자2 대기 목록 확인",
              "request": {
                "method": "GET",
                "url": "http://localhost:8083/process/3"
              }
            },
            {
              "name": "1-6. 결재자2 승인",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8083/process/3/1",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"approved\"\n}"
                }
              }
            },
            {
              "name": "1-7. 최종 결과 확인",
              "request": {
                "method": "GET",
                "url": "http://localhost:8082/approvals/1"
              }
            }
          ]
        },
        {
          "name": "시나리오 2: 결재 반려",
          "item": [
            {
              "name": "2-1. 결재 요청",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8082/approvals",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"requesterId\": 1,\n  \"title\": \"출장 신청\",\n  \"content\": \"서울 본사 출장 신청\",\n  \"steps\": [\n    {\"step\": 1, \"approverId\": 2}\n  ]\n}"
                }
              }
            },
            {
              "name": "2-2. 결재자 반려",
              "request": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "url": "http://localhost:8083/process/2/2",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"rejected\"\n}"
                }
              }
            },
            {
              "name": "2-3. 결과 확인",
              "request": {
                "method": "GET",
                "url": "http://localhost:8082/approvals/2"
              }
            }
          ]
        }
      ]
    }
  ]
}
